<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Coliseum API</title>
    <meta name="description" content="Sistema administrativo para gerenciar usu√°rios do Coliseum">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #000000 0%, #2d2d2d 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .container {
            background: linear-gradient(145deg, #383838, #282828);
            border-radius: 20px;
            padding: 40px 35px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #555;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 35px;
        }

        .logo-container {
            width: 110px;
            height: 110px;
            margin: 0 auto 20px auto;
            border-radius: 50%;
            border: 3px solid #ffcf00;
            box-shadow: 0 0 20px rgba(255, 207, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            background: #383838;
            padding: 8px;
        }

        .logo-emoji {
            font-size: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100px;
            height: 100px;
        }

        h1 {
            color: #ffcf00;
            font-size: 36px;
            font-weight: bold;
            text-shadow: 0 2px 10px rgba(255, 207, 0, 0.3);
            margin: 0;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #555;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            color: #888;
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #ffcf00;
            border-bottom: 3px solid #ffcf00;
        }

        .tab:hover {
            color: #ffcf00;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: linear-gradient(145deg, #383838, #282828);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid #555;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #000;
            background: #ffcf00;
        }

        .card-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #ffcf00;
        }

        .card-label {
            color: #aaa;
            font-size: 0.9rem;
        }

        .table-container {
            background: linear-gradient(145deg, #383838, #282828);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            border: 1px solid #555;
        }

        .table-header {
            padding: 18px 25px;
            background: rgba(255, 207, 0, 0.1);
            color: #ffcf00;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #555;
        }

        .table-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: #1a1a1a;
            border-radius: 10px;
            padding: 8px 15px;
            border: 1px solid #555;
        }

        .search-box input {
            background: transparent;
            border: none;
            color: #fff;
            padding: 5px;
            outline: none;
            width: 200px;
        }

        .search-box input::placeholder {
            color: #888;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #444;
            color: #ddd;
        }

        th {
            background: rgba(0, 0, 0, 0.3);
            font-weight: 600;
            color: #ffcf00;
        }

        tr:hover {
            background: rgba(255, 207, 0, 0.05);
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge.primary { background: rgba(67, 97, 238, 0.2); color: #4361ee; }
        .badge.success { background: rgba(76, 201, 240, 0.2); color: #4cc9f0; }
        .badge.warning { background: rgba(255, 207, 0, 0.2); color: #ffcf00; }
        .badge.danger { background: rgba(247, 37, 133, 0.2); color: #f72585; }

        .actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.75rem;
        }

        .btn-primary { 
            background: linear-gradient(135deg, #4361ee, #3a56d4); 
            color: white; 
        }

        .btn-success { 
            background: linear-gradient(135deg, #4cc9f0, #3ab7e0); 
            color: white; 
        }

        .btn-danger { 
            background: linear-gradient(135deg, #f72585, #e02178); 
            color: white; 
        }

        .btn-warning { 
            background: linear-gradient(135deg, #ffcf00, #e6ba00); 
            color: #000; 
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .form-container {
            background: linear-gradient(145deg, #383838, #282828);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);       
            margin-bottom: 20px;
            border: 1px solid #555;
        }

        .form-container h3 {
            color: #ffcf00;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #ffffff;
            font-size: 15px;
        }

        .form-control {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid #555;
            border-radius: 12px;
            font-size: 16px;
            background: #1a1a1a;
            color: #ffffff;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #ffcf00;
            box-shadow: 0 0 15px rgba(255, 207, 0, 0.3);
            background: #222222;
        }

        .form-control::placeholder {
            color: #888;
            font-size: 15px;
        }

        textarea.form-control {
            resize: vertical;
            min-height: 100px;
        }

        select.form-control {
            cursor: pointer;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(145deg, #383838, #282828);
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid #555;
            overflow: hidden;
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 207, 0, 0.1);
        }

        .modal-header h3 {
            margin: 0;
            color: #ffcf00;
            font-size: 1.4rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #ffcf00;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            transform: scale(1.1);
        }

        .modal-body {
            padding: 25px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 20px 25px;
            border-top: 1px solid #555;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            background: rgba(0, 0, 0, 0.2);
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 207, 0, 0.3);
            border-left: 4px solid #ffcf00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 14px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            color: #4caf50;
            border-left-color: #4caf50;
        }

        .alert-error {
            background: rgba(244, 67, 54, 0.1);
            color: #f44336;
            border-left-color: #f44336;
        }

        .alert-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: inherit;
        }

        #loadingGlobal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: #ffcf00;
            z-index: 9999;
            font-size: 18px;
            backdrop-filter: blur(5px);
        }

        .spinner-large {
            border: 4px solid rgba(255, 207, 0, 0.3);
            border-radius: 50%;
            border-top: 4px solid #ffcf00;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        /* Estilos espec√≠ficos para cursos */
        .curso-card {
            background: linear-gradient(145deg, #383838, #282828);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #555;
            transition: all 0.3s ease;
        }

        .curso-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .curso-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .curso-info h4 {
            color: #ffcf00;
            margin-bottom: 5px;
            font-size: 1.2rem;
        }

        .curso-meta {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .curso-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .curso-stat-value {
            font-weight: bold;
            color: #ffcf00;
        }

        .curso-stat-label {
            font-size: 0.8rem;
            color: #aaa;
        }

        .curso-description {
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .curso-modulos {
            margin-top: 15px;
        }

        .modulo-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .modulo-info {
            flex: 1;
        }

        .modulo-title {
            font-weight: 600;
            color: #fff;
        }

        .modulo-details {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 3px;
        }

        /* Bot√£o Voltar */
        .btn-voltar {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ffcf00;
            color: #000;
            font-size: 24px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(255, 207, 0, 0.4);
            transition: all 0.3s ease;
        }

        .btn-voltar:hover {
            background: #e6b800;
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 207, 0, 0.6);
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .container {
                padding: 25px 20px;
                max-width: 100%;
            }

            .logo-container {
                width: 90px;
                height: 90px;
            }

            .logo-emoji {
                font-size: 50px;
                width: 80px;
                height: 80px;
            }

            h1 {
                font-size: 28px;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                padding: 12px 15px;
                text-align: center;
            }

            .cards-container {
                grid-template-columns: 1fr;
            }

            .table-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .search-box {
                width: 100%;
            }

            .search-box input {
                width: 100%;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .modal-content {
                width: 95%;
            }

            th, td {
                padding: 10px 8px;
                font-size: 0.85rem;
            }

            .curso-header {
                flex-direction: column;
                gap: 10px;
            }

            .curso-meta {
                justify-content: space-between;
                width: 100%;
            }

            .btn-voltar {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px 15px;
            }

            .logo-container {
                width: 80px;
                height: 80px;
            }

            .logo-emoji {
                font-size: 40px;
                width: 70px;
                height: 70px;
            }

            h1 {
                font-size: 24px;
            }

            .card {
                padding: 20px;
            }

            .table-header h3 {
                font-size: 1.1rem;
            }

            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }

            .modal-body {
                padding: 20px;
            }

            .btn-voltar {
                width: 45px;
                height: 45px;
                font-size: 18px;
                bottom: 15px;
                right: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo-emoji">üèõÔ∏è</div>
            </div>
            <h1>Coliseum Admin</h1>
        </div>

        <!-- Tabs Navigation -->
        <div class="tabs">
            <div class="tab active" data-tab="dashboard">Dashboard</div>
            <div class="tab" data-tab="users">Gerenciar Usu√°rios</div>
            <div class="tab" data-tab="videos">Gerenciar V√≠deos</div>
            <div class="tab" data-tab="cursos">Gerenciar Cursos</div>
            <div class="tab" data-tab="ranking">Ranking Completo</div>
            <div class="tab" data-tab="settings">Configura√ß√µes</div>
        </div>

        <!-- Alert Container -->
        <div id="alert-container"></div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-value" id="total-users">0</div>
                            <div class="card-label">Total de Usu√°rios</div>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-value" id="total-points">0</div>
                            <div class="card-label">Pontua√ß√£o Total</div>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-value" id="total-challenges">0</div>
                            <div class="card-label">Desafios Completos</div>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-flag"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-value" id="total-series">0</div>
                            <div class="card-label">S√©ries Diferentes</div>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-value" id="total-cursos">0</div>
                            <div class="card-label">Total de Cursos</div>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-value" id="total-videos">0</div>
                            <div class="card-label">Total de V√≠deos</div>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-video"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3>Ranking - Top 10</h3>
                </div>
                <div class="loading" id="ranking-loading">
                    <div class="spinner"></div>
                </div>
                <table id="ranking-table">
                    <thead>
                        <tr>
                            <th>Posi√ß√£o</th>
                            <th>Nome</th>
                            <th>RA</th>
                            <th>S√©rie</th>
                            <th>Pontua√ß√£o</th>
                            <th>Desafios</th>
                        </tr>
                    </thead>
                    <tbody id="ranking-body">
                        <!-- Ranking data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="users" class="tab-content">
            <div class="table-container">
                <div class="table-header">
                    <h3>Gerenciar Usu√°rios</h3>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="user-search" placeholder="Buscar usu√°rios...">
                    </div>
                </div>
                <div class="loading" id="users-loading">
                    <div class="spinner"></div>
                </div>
                <table id="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>RA</th>
                            <th>S√©rie</th>
                            <th>Pontua√ß√£o</th>
                            <th>Desafios</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="users-body">
                        <!-- Users data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Videos Tab -->
        <div id="videos" class="tab-content">
            <div class="table-container">
                <div class="table-header">
                    <h3>Gerenciar V√≠deos</h3>
                    <button class="btn btn-primary" id="add-video-btn">
                        <i class="fas fa-plus"></i> Adicionar V√≠deo
                    </button>
                </div>
                <div class="loading" id="videos-loading">
                    <div class="spinner"></div>
                </div>
                <table id="videos-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>T√≠tulo</th>
                            <th>Mat√©ria</th>
                            <th>Categoria</th>
                            <th>URL</th>
                            <th>Dura√ß√£o</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="videos-body">
                        <!-- Videos data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Cursos Tab -->
        <div id="cursos" class="tab-content">
            <div class="table-container">
                <div class="table-header">
                    <h3>Gerenciar Cursos</h3>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-success" id="criar-exemplo-btn">
                            <i class="fas fa-magic"></i> Criar Exemplo
                        </button>
                        <button class="btn btn-primary" id="add-curso-btn">
                            <i class="fas fa-plus"></i> Criar Curso
                        </button>
                    </div>
                </div>
                <div class="loading" id="cursos-loading">
                    <div class="spinner"></div>
                </div>
                <div id="cursos-container">
                    <!-- Cursos cards will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Ranking Tab -->
        <div id="ranking" class="tab-content">
            <div class="table-container">
                <div class="table-header">
                    <h3>Ranking Completo</h3>
                    <button class="btn btn-primary" id="refresh-ranking">
                        <i class="fas fa-sync-alt"></i> Atualizar
                    </button>
                </div>
                <div class="loading" id="full-ranking-loading">
                    <div class="spinner"></div>
                </div>
                <table id="full-ranking-table">
                    <thead>
                        <tr>
                            <th>Posi√ß√£o</th>
                            <th>Nome</th>
                            <th>RA</th>
                            <th>S√©rie</th>
                            <th>Pontua√ß√£o</th>
                            <th>Desafios</th>
                        </tr>
                    </thead>
                    <tbody id="full-ranking-body">
                        <!-- Full ranking data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="form-container">
                <h3>Configura√ß√µes do Sistema</h3>
                <div class="form-group">
                    <label for="api-url">URL da API</label>
                    <input type="text" id="api-url" class="form-control" value="https://coliseum-api.onrender.com">
                </div>
                <div class="form-group">
                    <label for="admin-password">Senha de Administrador</label>
                    <input type="password" id="admin-password" class="form-control" placeholder="Digite sua senha">
                </div>
                <button class="btn btn-primary" id="save-settings">
                    <i class="fas fa-save"></i> Salvar Configura√ß√µes
                </button>
            </div>

            <div class="form-container">
                <h3>Manuten√ß√£o do Sistema</h3>
                <p style="color: #aaa; margin-bottom: 15px;">Use estas op√ß√µes com cuidado. As a√ß√µes n√£o podem ser desfeitas.</p>
                <div class="form-row">
                    <button class="btn btn-warning" id="reset-points">
                        <i class="fas fa-undo"></i> Zerar Pontua√ß√µes
                    </button>
                    <button class="btn btn-danger" id="reset-all">
                        <i class="fas fa-trash"></i> Resetar Todos os Dados
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal" id="edit-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Usu√°rio</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-user-form">
                    <input type="hidden" id="edit-user-id">
                    <div class="form-group">
                        <label for="edit-user-name">Nome</label>
                        <input type="text" id="edit-user-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-user-ra">RA</label>
                        <input type="text" id="edit-user-ra" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-user-serie">S√©rie</label>
                        <input type="text" id="edit-user-serie" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-user-pontuacao">Pontua√ß√£o</label>
                        <input type="number" id="edit-user-pontuacao" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-user-desafios">Desafios Completos</label>
                        <input type="number" id="edit-user-desafios" class="form-control" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="cancel-edit">Cancelar</button>
                <button class="btn btn-primary" id="save-user">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div class="modal" id="video-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="video-modal-title">Adicionar V√≠deo</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="video-form">
                    <input type="hidden" id="video-id">
                    <div class="form-group">
                        <label for="video-title">T√≠tulo do V√≠deo</label>
                        <input type="text" id="video-title" class="form-control" placeholder="Ex: Introdu√ß√£o √† √Ålgebra" required>
                    </div>

                    <div class="form-group">
                        <label for="video-materia">Mat√©ria</label>
                        <select id="video-materia" class="form-control" required>
                            <option value="">Selecione a mat√©ria</option>
                            <option value="matematica">Matem√°tica</option>
                            <option value="csn">CSN</option>
                            <option value="csh">CSH</option>
                            <option value="portugues">Portugu√™s</option>
                            <option value="programacao">Programa√ß√£o</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="video-categoria">Categoria Espec√≠fica</label>
                        <input type="text" id="video-categoria" class="form-control" 
                               placeholder="Ex: Hist√≥ria Mundial, √Ålgebra B√°sica, Gram√°tica..." 
                               required>
                        <small style="color: #888; font-size: 12px; margin-top: 5px;">
                            Esta categoria aparecer√° como badge no v√≠deo
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="video-url">URL do V√≠deo (YouTube)</label>
                        <input type="text" id="video-url" class="form-control" 
                               placeholder="https://www.youtube.com/embed/... ou https://www.youtube.com/watch?v=..." 
                               required>
                        <small style="color: #888; font-size: 12px; margin-top: 5px;">
                            Aceita URLs embed ou normais do YouTube
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="video-descricao">Descri√ß√£o do V√≠deo</label>
                        <textarea id="video-descricao" class="form-control" rows="3" 
                                  placeholder="Descreva o conte√∫do do v√≠deo, t√≥picos abordados..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="video-duracao">Dura√ß√£o (minutos)</label>
                        <input type="number" id="video-duracao" class="form-control" min="1" 
                               placeholder="Ex: 15" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="cancel-video">Cancelar</button>
                <button class="btn btn-primary" id="save-video">Salvar V√≠deo</button>
            </div>
        </div>
    </div>

    <!-- Curso Modal -->
    <div class="modal" id="curso-modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="curso-modal-title">Criar Curso</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="curso-form">
                    <input type="hidden" id="curso-id">
                    
                    <div class="form-group">
                        <label for="curso-titulo">T√≠tulo do Curso *</label>
                        <input type="text" id="curso-titulo" class="form-control" placeholder="Ex: Matem√°tica B√°sica" required>
                    </div>

                    <div class="form-group">
                        <label for="curso-descricao">Descri√ß√£o do Curso</label>
                        <textarea id="curso-descricao" class="form-control" rows="3" 
                                  placeholder="Descreva o conte√∫do do curso, objetivos e p√∫blico-alvo..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="curso-materia">Mat√©ria *</label>
                            <select id="curso-materia" class="form-control" required>
                                <option value="">Selecione a mat√©ria</option>
                                <option value="matematica">Matem√°tica</option>
                                <option value="csn">Ci√™ncias da Natureza</option>
                                <option value="csh">Ci√™ncias Humanas</option>
                                <option value="portugues">L√≠ngua Portuguesa</option>
                                <option value="programacao">Programa√ß√£o</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="curso-categoria">Categoria *</label>
                            <select id="curso-categoria" class="form-control" required>
                                <option value="">Selecione a categoria</option>
                                <option value="algebra">√Ålgebra</option>
                                <option value="geometria">Geometria</option>
                                <option value="quimica">Qu√≠mica</option>
                                <option value="fisica">F√≠sica</option>
                                <option value="historia">Hist√≥ria</option>
                                <option value="geografia">Geografia</option>
                                <option value="gramatica">Gram√°tica</option>
                                <option value="interpretacao">Interpreta√ß√£o</option>
                                <option value="python">Python</option>
                                <option value="javascript">JavaScript</option>
                                <option value="web">Desenvolvimento Web</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="curso-nivel">N√≠vel *</label>
                            <select id="curso-nivel" class="form-control" required>
                                <option value="">Selecione o n√≠vel</option>
                                <option value="iniciante">Iniciante</option>
                                <option value="intermediario">Intermedi√°rio</option>
                                <option value="avancado">Avan√ßado</option>
                                <option value="fundamental">Fundamental</option>
                                <option value="medio">Ensino M√©dio</option>
                                <option value="vestibular">Vestibular</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="curso-duracao">Dura√ß√£o Estimada (horas) *</label>
                            <input type="number" id="curso-duracao" class="form-control" min="1" placeholder="Ex: 20" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="curso-imagem">URL da Imagem do Curso</label>
                        <input type="text" id="curso-imagem" class="form-control" 
                               placeholder="https://exemplo.com/imagem.jpg">
                        <small style="color: #888; font-size: 12px; margin-top: 5px;">
                            Deixe em branco para usar imagem padr√£o
                        </small>
                    </div>

                    <!-- SE√á√ÉO DE M√ìDULOS E AULAS -->
                    <div class="form-group">
                        <label style="color: #ffcf00; font-size: 1.1rem; margin-bottom: 15px;">
                            <i class="fas fa-layer-group"></i> M√≥dulos e Aulas *
                        </label>
                        <small style="color: #888; display: block; margin-bottom: 10px;">
                            Adicione pelo menos um m√≥dulo com uma aula para criar o curso
                        </small>
                        
                        <div id="modulos-container">
                            <!-- M√≥dulos ser√£o adicionados aqui -->
                        </div>
                        
                        <button type="button" class="btn btn-secondary" id="add-modulo-btn" style="margin-top: 10px;">
                            <i class="fas fa-plus"></i> Adicionar M√≥dulo
                        </button>
                    </div>

                    <div class="form-group">
                        <label for="curso-ativo">Status do Curso</label>
                        <select id="curso-ativo" class="form-control">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="cancel-curso">Cancelar</button>
                <button class="btn btn-primary" id="save-curso">Salvar Curso</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar A√ß√£o</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Tem certeza que deseja realizar esta a√ß√£o?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="cancel-action">Cancelar</button>
                <button class="btn btn-danger" id="confirm-action">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Global Loading -->
    <div id="loadingGlobal">
        <div class="spinner-large"></div>
        <p>Carregando...</p>
    </div>

    <!-- Bot√£o Voltar -->
    <button class="btn-voltar" onclick="voltarParaMenu()" title="Voltar para o Menu">
        <i class="fas fa-arrow-left"></i>
    </button>

    <script>// Vari√°veis globais
const API_BASE_URL = 'https://coliseum-api.onrender.com';
let users = [];
let videos = [];
let cursos = [];
let currentTab = 'dashboard';
let pendingAction = null;
let moduloCount = 0;
let aulaCount = 0;

// DOM Elements
const tabs = document.querySelectorAll('.tab');
const tabContents = document.querySelectorAll('.tab-content');
const alertContainer = document.getElementById('alert-container');

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    initializeTabs();
    loadDashboardData();
    setupEventListeners();
});

// Tab Navigation
function initializeTabs() {
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            // Show corresponding content
            const tabId = this.getAttribute('data-tab');
            tabContents.forEach(content => {
                content.classList.remove('active');
                if (content.id === tabId) {
                    content.classList.add('active');
                    currentTab = tabId;

                    // Load data for the tab
                    switch(tabId) {
                        case 'dashboard':
                            loadDashboardData();
                            break;
                        case 'users':
                            loadUsers();
                            break;
                        case 'videos':
                            loadVideos();
                            break;
                        case 'cursos':
                            loadCursos();
                            break;
                        case 'ranking':
                            loadFullRanking();
                            break;
                    }
                }
            });
        });
    });
}

// Event Listeners
function setupEventListeners() {
    console.log('üîß Configurando event listeners...');

    // Search functionality
    const userSearch = document.getElementById('user-search');
    if (userSearch) {
        userSearch.addEventListener('input', filterUsers);
    }

    // Refresh ranking
    const refreshRanking = document.getElementById('refresh-ranking');
    if (refreshRanking) {
        refreshRanking.addEventListener('click', loadFullRanking);
    }

    // Modal controls
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('modal-close')) {
            e.target.closest('.modal').style.display = 'none';
        }
    });

    // Cancel buttons
    const cancelEdit = document.getElementById('cancel-edit');
    if (cancelEdit) {
        cancelEdit.addEventListener('click', function() {
            document.getElementById('edit-user-modal').style.display = 'none';
        });
    }

    const cancelVideo = document.getElementById('cancel-video');
    if (cancelVideo) {
        cancelVideo.addEventListener('click', function() {
            document.getElementById('video-modal').style.display = 'none';
        });
    }

    const cancelCurso = document.getElementById('cancel-curso');
    if (cancelCurso) {
        cancelCurso.addEventListener('click', function() {
            document.getElementById('curso-modal').style.display = 'none';
        });
    }

    const cancelAction = document.getElementById('cancel-action');
    if (cancelAction) {
        cancelAction.addEventListener('click', function() {
            document.getElementById('confirm-modal').style.display = 'none';
        });
    }

    // Save buttons
    const saveUserBtn = document.getElementById('save-user');
    if (saveUserBtn) {
        saveUserBtn.addEventListener('click', saveUser);
    }

    const saveVideoBtn = document.getElementById('save-video');
    if (saveVideoBtn) {
        saveVideoBtn.addEventListener('click', saveVideo);
    }

    const saveCursoBtn = document.getElementById('save-curso');
    if (saveCursoBtn) {
        saveCursoBtn.addEventListener('click', saveCurso);
    }

    // Add buttons
    const addVideoBtn = document.getElementById('add-video-btn');
    if (addVideoBtn) {
        addVideoBtn.addEventListener('click', function() {
            showVideoModal();
        });
    }

    const addCursoBtn = document.getElementById('add-curso-btn');
    if (addCursoBtn) {
        addCursoBtn.addEventListener('click', function() {
            showCursoModal();
        });
    }

    // Settings buttons
    const saveSettings = document.getElementById('save-settings');
    if (saveSettings) {
        saveSettings.addEventListener('click', saveSettings);
    }

    const resetPoints = document.getElementById('reset-points');
    if (resetPoints) {
        resetPoints.addEventListener('click', function() {
            showConfirmation('Zerar todas as pontua√ß√µes?', resetAllPoints);
        });
    }

    const resetAll = document.getElementById('reset-all');
    if (resetAll) {
        resetAll.addEventListener('click', function() {
            showConfirmation('Resetar TODOS os dados? Esta a√ß√£o n√£o pode ser desfeita!', resetAllData);
        });
    }

    // Confirm action
    const confirmAction = document.getElementById('confirm-action');
    if (confirmAction) {
        confirmAction.addEventListener('click', function() {
            if (pendingAction) {
                pendingAction();
                document.getElementById('confirm-modal').style.display = 'none';
                pendingAction = null;
            }
        });
    }

    // Cursos button
    const addModuloBtn = document.getElementById('add-modulo-btn');
    if (addModuloBtn) {
        addModuloBtn.addEventListener('click', function() {
            addModuloToForm();
        });
    }

    console.log('‚úÖ Todos os event listeners configurados');
}

// Fun√ß√£o para voltar ao menu
function voltarParaMenu() {
    window.location.href = '/menu';
}
// ‚úÖ SUBSTITUA APENAS ESTA FUN√á√ÉO NO SEU C√ìDIGO
async function fetchAPI(endpoint, options = {}) {
    const PROXY_URL = 'https://corsproxy.io/?';
    const targetURL = `${API_BASE_URL}${endpoint}`;
    
    try {
        console.log(`üåê Fazendo requisi√ß√£o via proxy para: ${targetURL}`);
        
        const response = await fetch(`${PROXY_URL}${encodeURIComponent(targetURL)}`, {
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                ...options.headers
            },
            ...options
        });

        if (!response.ok) throw new Error(`Erro ${response.status}`);
        
        return await response.json();
        
    } catch (error) {
        console.error('‚ùå Erro com proxy:', error);
        throw error;
    }
}
// ‚úÖ Data Loading Functions atualizadas
async function loadDashboardData() {
    try {
        document.getElementById('ranking-loading').style.display = 'flex';

        console.log('üîÑ Carregando dados do dashboard...');

        const [ranking, cursosData, videosData] = await Promise.all([
            fetchAPI('/api/ranking').catch(() => []),
            fetchAPI('/api/cursos').catch(() => []),
            fetchAPI('/api/videos').catch(() => [])
        ]);

        console.log('üìä Dados carregados:', {
            usuarios: ranking.length,
            cursos: cursosData.length,
            videos: videosData.length
        });

        displayRanking(ranking.slice(0, 10));

        // C√°lculos para estat√≠sticas
        const totalUsers = ranking.length;
        const totalPoints = ranking.reduce((sum, user) => sum + (user.pontuacao || 0), 0);
        const totalChallenges = ranking.reduce((sum, user) => sum + (user.desafiosCompletados || 0), 0);
        const series = [...new Set(ranking.map(user => user.serie || 'N/A'))].length;
        const totalCursos = cursosData.length;
        const totalVideos = videosData.length;

        // Atualiza a interface
        document.getElementById('total-users').textContent = totalUsers;
        document.getElementById('total-points').textContent = totalPoints.toLocaleString();
        document.getElementById('total-challenges').textContent = totalChallenges;
        document.getElementById('total-series').textContent = series;
        document.getElementById('total-cursos').textContent = totalCursos;
        document.getElementById('total-videos').textContent = totalVideos;

    } catch (error) {
        console.error('‚ùå Erro cr√≠tico no dashboard:', error);
        showAlert('Erro ao carregar dashboard: ' + error.message, 'error');

        // Mostra "0" em caso de erro
        document.getElementById('total-users').textContent = '0';
        document.getElementById('total-points').textContent = '0';
        document.getElementById('total-challenges').textContent = '0';
        document.getElementById('total-series').textContent = '0';
        document.getElementById('total-cursos').textContent = '0';
        document.getElementById('total-videos').textContent = '0';
    } finally {
        document.getElementById('ranking-loading').style.display = 'none';
    }
}

async function loadUsers() {
    try {
        document.getElementById('users-loading').style.display = 'flex';
        const ranking = await fetchAPI('/api/ranking');
        users = ranking;
        displayUsers(users);
    } catch (error) {
        console.error('Error loading users:', error);
        showAlert('Erro ao carregar usu√°rios: ' + error.message, 'error');
    } finally {
        document.getElementById('users-loading').style.display = 'none';
    }
}

async function loadVideos() {
    try {
        document.getElementById('videos-loading').style.display = 'flex';
        const videosData = await fetchAPI('/api/videos');
        videos = Array.isArray(videosData) ? videosData : [];
        displayVideos(videos);
    } catch (error) {
        console.error('Error loading videos:', error);
        showAlert('Erro ao carregar v√≠deos: ' + error.message, 'error');
    } finally {
        document.getElementById('videos-loading').style.display = 'none';
    }
}

// ‚úÖ FUN√á√ÉO LOADCURSOS SIMPLES COM PROXY
async function loadCursos() {
    try {
        showLoading();
        console.log('üîÑ Carregando cursos...');
        
        // Usar proxy CORS
        const proxyURL = `https://corsproxy.io/?${encodeURIComponent(`${API_BASE_URL}/api/cursos`)}`;
        
        const response = await fetch(proxyURL);
        
        if (response.ok) {
            const data = await response.json();
            cursos = Array.isArray(data) ? data : [];
            console.log(`‚úÖ ${cursos.length} cursos carregados`);
        } else {
            throw new Error(`Erro ${response.status}`);
        }
    } catch (error) {
        console.error('‚ùå Erro:', error);
        cursos = [];
        showAlert('‚ùå Erro ao carregar cursos. Tente novamente.', 'error');
    } finally {
        filteredCursos = [...cursos];
        displayCursos();
        updateStats();
    }
}
async function loadFullRanking() {
    try {
        document.getElementById('full-ranking-loading').style.display = 'flex';
        const ranking = await fetchAPI('/api/ranking');
        displayFullRanking(ranking);
    } catch (error) {
        console.error('Error loading full ranking:', error);
        showAlert('Erro ao carregar ranking: ' + error.message, 'error');
    } finally {
        document.getElementById('full-ranking-loading').style.display = 'none';
    }
}

function displayRanking(ranking) {
    const tbody = document.getElementById('ranking-body');
    if (!tbody) return;

    tbody.innerHTML = '';

    if (!ranking || ranking.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td colspan="6" style="text-align: center; color: #888; padding: 20px;">
                <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                Nenhum usu√°rio encontrado
            </td>
        `;
        tbody.appendChild(row);
        return;
    }

    ranking.forEach((user, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td><strong>${index + 1}¬∫</strong></td>
            <td>${user.nome}</td>
            <td><code>${user.ra}</code></td>
            <td>${user.serie}</td>
            <td><span style="color: #ffcf00; font-weight: bold;">${user.pontuacao}</span></td>
            <td>${user.desafiosCompletados}</td>
        `;
        tbody.appendChild(row);
    });
}

function displayUsers(users) {
    const tbody = document.getElementById('users-body');
    if (!tbody) return;

    tbody.innerHTML = '';

    if (!users || users.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td colspan="7" style="text-align: center; color: #888; padding: 20px;">
                <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                Nenhum usu√°rio encontrado
            </td>
        `;
        tbody.appendChild(row);
        return;
    }

    users.forEach(user => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${user.id}</td>
            <td>${user.nome}</td>
            <td>${user.ra}</td>
            <td>${user.serie}</td>
            <td>${user.pontuacao}</td>
            <td>${user.desafiosCompletados}</td>
            <td class="actions">
                <button class="btn btn-primary btn-sm edit-user" data-id="${user.id}">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-danger btn-sm delete-user" data-id="${user.id}">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(row);
    });

    // Add event listeners usando event delegation
    tbody.addEventListener('click', function(e) {
        if (e.target.closest('.edit-user')) {
            const userId = e.target.closest('.edit-user').getAttribute('data-id');
            editUser(userId);
        }
        if (e.target.closest('.delete-user')) {
            const userId = e.target.closest('.delete-user').getAttribute('data-id');
            deleteUser(userId);
        }
    });
}

function displayVideos(videosList) {
    const tbody = document.getElementById('videos-body');
    if (!tbody) return;

    tbody.innerHTML = '';

    if (!videosList || videosList.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td colspan="7" style="text-align: center; color: #888; padding: 20px;">
                <i class="fas fa-video" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                Nenhum v√≠deo encontrado
            </td>
        `;
        tbody.appendChild(row);
        return;
    }

    videosList.forEach(video => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${video.id}</td>
            <td>${video.titulo}</td>
            <td>${getMateriaNome(video.materia)}</td>
            <td>${video.categoria}</td>
            <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                ${video.url}
            </td>
            <td>${video.duracao} min</td>
            <td class="actions">
                <button class="btn btn-primary btn-sm edit-video" data-id="${video.id}">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-danger btn-sm delete-video" data-id="${video.id}">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(row);
    });

    // Add event listeners usando event delegation
    tbody.addEventListener('click', function(e) {
        if (e.target.closest('.edit-video')) {
            const videoId = e.target.closest('.edit-video').getAttribute('data-id');
            editVideo(videoId);
        }
        if (e.target.closest('.delete-video')) {
            const videoId = e.target.closest('.delete-video').getAttribute('data-id');
            deleteVideo(videoId);
        }
    });
}

function displayCursos(cursosList) {
    const container = document.getElementById('cursos-container');
    if (!container) return;

    container.innerHTML = '';

    if (!cursosList || cursosList.length === 0) {
        container.innerHTML = `
            <div class="no-data" style="text-align: center; padding: 40px;">
                <i class="fas fa-graduation-cap" style="font-size: 3rem; margin-bottom: 15px; color: #ffcf00;"></i>
                <h3 style="color: #ffcf00; margin-bottom: 10px;">Nenhum curso encontrado</h3>
                <p style="color: #aaa;">Clique em "Criar Curso" para adicionar o primeiro curso ao sistema.</p>
            </div>
        `;
        return;
    }

    cursosList.forEach(curso => {
        const cursoCard = document.createElement('div');
        cursoCard.className = 'curso-card';

        const totalAulas = curso.modulos ? curso.modulos.reduce((total, modulo) => 
            total + (modulo.aulas ? modulo.aulas.length : 0), 0) : 0;

        cursoCard.innerHTML = `
            <div class="curso-header">
                <div class="curso-info">
                    <h4>${curso.titulo}</h4>
                    <div class="badge ${getMateriaBadgeClass(curso.materia)}">${getMateriaNome(curso.materia)}</div>
                    <div class="badge ${getNivelClass(curso.nivel)}" style="margin-left: 5px;">${getNivelNome(curso.nivel)}</div>
                    <div class="curso-meta">
                        <div class="curso-stat">
                            <div class="curso-stat-value">${curso.duracao}h</div>
                            <div class="curso-stat-label">Dura√ß√£o</div>
                        </div>
                        <div class="curso-stat">
                            <div class="curso-stat-value">${curso.modulos ? curso.modulos.length : 0}</div>
                            <div class="curso-stat-label">M√≥dulos</div>
                        </div>
                        <div class="curso-stat">
                            <div class="curso-stat-value">${totalAulas}</div>
                            <div class="curso-stat-label">Aulas</div>
                        </div>
                    </div>
                </div>
                <div class="actions">
                    <button class="btn btn-primary btn-sm edit-curso" data-id="${curso.id}">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-danger btn-sm delete-curso" data-id="${curso.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="curso-description">
                ${curso.descricao || 'Sem descri√ß√£o dispon√≠vel.'}
            </div>
            <div class="curso-category">
                <small style="color: #ffcf00;">Categoria: ${getCategoriaNome(curso.categoria)}</small>
            </div>
            <div class="curso-status">
                <span class="badge ${curso.ativo ? 'success' : 'danger'}">
                    ${curso.ativo ? 'Ativo' : 'Inativo'}
                </span>
            </div>
        `;

        container.appendChild(cursoCard);
    });

    // Add event listeners para cursos
    container.addEventListener('click', function(e) {
        if (e.target.closest('.edit-curso')) {
            const cursoId = e.target.closest('.edit-curso').getAttribute('data-id');
            editCurso(cursoId);
        }
        if (e.target.closest('.delete-curso')) {
            const cursoId = e.target.closest('.delete-curso').getAttribute('data-id');
            deleteCurso(cursoId);
        }
    });
}

function displayFullRanking(ranking) {
    const tbody = document.getElementById('full-ranking-body');
    if (!tbody) return;

    tbody.innerHTML = '';

    if (!ranking || ranking.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td colspan="6" style="text-align: center; color: #888; padding: 20px;">
                <i class="fas fa-trophy" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                Nenhum usu√°rio no ranking
            </td>
        `;
        tbody.appendChild(row);
        return;
    }

    ranking.forEach((user, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${index + 1}</td>
            <td>${user.nome}</td>
            <td>${user.ra}</td>
            <td>${user.serie}</td>
            <td>${user.pontuacao}</td>
            <td>${user.desafiosCompletados}</td>
        `;
        tbody.appendChild(row);
    });
}

// Helper functions para cursos
function getMateriaBadgeClass(materia) {
    const classes = {
        'matematica': 'primary',
        'csn': 'success',
        'csh': 'warning',
        'portugues': 'danger',
        'programacao': 'primary'
    };
    return classes[materia] || 'primary';
}

function getMateriaNome(materia) {
    const nomes = {
        'matematica': 'Matem√°tica',
        'csn': 'CSN',
        'csh': 'CSH',
        'portugues': 'Portugu√™s',
        'programacao': 'Programa√ß√£o'
    };
    return nomes[materia] || materia;
}

function getNivelClass(nivel) {
    const classes = {
        'fundamental': 'success',
        'medio': 'warning',
        'vestibular': 'danger',
        'iniciante': 'primary',
        'intermediario': 'warning',
        'avancado': 'danger'
    };
    return classes[nivel] || 'primary';
}

function getNivelNome(nivel) {
    const nomes = {
        'fundamental': 'Fundamental',
        'medio': 'Ensino M√©dio',
        'vestibular': 'Vestibular',
        'iniciante': 'Iniciante',
        'intermediario': 'Intermedi√°rio',
        'avancado': 'Avan√ßado'
    };
    return nomes[nivel] || nivel;
}

function getCategoriaNome(categoria) {
    const nomes = {
        'algebra': '√Ålgebra',
        'geometria': 'Geometria',
        'quimica': 'Qu√≠mica',
        'fisica': 'F√≠sica',
        'historia': 'Hist√≥ria',
        'geografia': 'Geografia',
        'gramatica': 'Gram√°tica',
        'interpretacao': 'Interpreta√ß√£o',
        'python': 'Python',
        'javascript': 'JavaScript',
        'web': 'Desenvolvimento Web'
    };
    return nomes[categoria] || categoria;
}

// User Management
function filterUsers() {
    const searchTerm = document.getElementById('user-search').value.toLowerCase();
    const filteredUsers = users.filter(user => 
        user.nome.toLowerCase().includes(searchTerm) || 
        user.ra.toLowerCase().includes(searchTerm) ||
        (user.serie && user.serie.toLowerCase().includes(searchTerm))
    );
    displayUsers(filteredUsers);
}

function editUser(userId) {
    const user = users.find(u => u.id == userId);
    if (!user) {
        console.error('‚ùå Usu√°rio n√£o encontrado:', userId);
        return;
    }

    console.log('‚úèÔ∏è Editando usu√°rio:', user);

    document.getElementById('edit-user-id').value = user.id;
    document.getElementById('edit-user-name').value = user.nome;
    document.getElementById('edit-user-ra').value = user.ra;
    document.getElementById('edit-user-serie').value = user.serie || '';
    document.getElementById('edit-user-pontuacao').value = user.pontuacao || 0;
    document.getElementById('edit-user-desafios').value = user.desafiosCompletados || 0;

    document.getElementById('edit-user-modal').style.display = 'flex';
}

async function deleteUser(userId) {
    const user = users.find(u => u.id == userId);
    if (!user) {
        console.error('‚ùå Usu√°rio n√£o encontrado:', userId);
        return;
    }

    showConfirmation(`Tem certeza que deseja excluir o usu√°rio "${user.nome}" (RA: ${user.ra})? Esta a√ß√£o n√£o pode ser desfeita.`, async () => {
        try {
            showGlobalLoading(true);

            console.log(`üóëÔ∏è Excluindo usu√°rio ${userId}...`);

            const response = await fetch(`${API_BASE_URL}/api/usuarios/${userId}`, {
                method: 'DELETE'
            });

            if (!response.ok) throw new Error(`Erro ${response.status}`);

            const result = await response.json();
            console.log('‚úÖ Usu√°rio exclu√≠do:', result);

            showAlert('‚úÖ Usu√°rio exclu√≠do com sucesso!', 'success');

            // Recarrega os dados
            await loadUsers();

        } catch (error) {
            console.error('‚ùå Erro ao excluir usu√°rio:', error);
            showAlert('‚ùå Erro ao excluir usu√°rio: ' + error.message, 'error');
        } finally {
            showGlobalLoading(false);
        }
    });
}

async function saveUser() {
    const userId = document.getElementById('edit-user-id').value;
    const userData = {
        nome: document.getElementById('edit-user-name').value,
        ra: document.getElementById('edit-user-ra').value,
        serie: document.getElementById('edit-user-serie').value,
        pontuacao: parseInt(document.getElementById('edit-user-pontuacao').value),
        desafiosCompletados: parseInt(document.getElementById('edit-user-desafios').value)
    };

    console.log('üíæ Salvando usu√°rio...', userId, userData);

    try {
        showGlobalLoading(true);

        const response = await fetch(`${API_BASE_URL}/api/usuarios/${userId}`, {
            method: 'PUT',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(userData)
        });

        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Erro ${response.status}: ${errorText}`);
        }

        const result = await response.json();
        console.log('‚úÖ Usu√°rio salvo:', result);

        showAlert('‚úÖ Usu√°rio atualizado com sucesso!', 'success');
        document.getElementById('edit-user-modal').style.display = 'none';

        await loadUsers();

    } catch (error) {
        console.error('‚ùå Erro ao salvar usu√°rio:', error);
        showAlert('‚ùå Erro ao salvar usu√°rio: ' + error.message, 'error');
    } finally {
        showGlobalLoading(false);
    }
}

// Video Management
function showVideoModal(video = null) {
    const modal = document.getElementById('video-modal');
    const title = document.getElementById('video-modal-title');
    const form = document.getElementById('video-form');

    if (video) {
        title.textContent = 'Editar V√≠deo';
        document.getElementById('video-id').value = video.id;
        document.getElementById('video-title').value = video.titulo;
        document.getElementById('video-materia').value = video.materia;
        document.getElementById('video-categoria').value = video.categoria;
        document.getElementById('video-url').value = video.url;
        document.getElementById('video-descricao').value = video.descricao || '';
        document.getElementById('video-duracao').value = video.duracao;
    } else {
        title.textContent = 'Adicionar V√≠deo';
        form.reset();
    }

    modal.style.display = 'flex';
}

function editVideo(videoId) {
    const video = videos.find(v => v.id == videoId);
    if (video) {
        showVideoModal(video);
    }
}

async function saveVideo() {
    const videoId = document.getElementById('video-id').value;
    const videoData = {
        titulo: document.getElementById('video-title').value,
        materia: document.getElementById('video-materia').value,
        categoria: document.getElementById('video-categoria').value,
        url: document.getElementById('video-url').value,
        descricao: document.getElementById('video-descricao').value,
        duracao: parseInt(document.getElementById('video-duracao').value)
    };

    try {
        showGlobalLoading(true);

        let response;
        if (videoId) {
            response = await fetch(`${API_BASE_URL}/api/videos/${videoId}`, {
                method: 'PUT',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(videoData)
            });
        } else {
            response = await fetch(`${API_BASE_URL}/api/videos`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(videoData)
            });
        }

        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Erro ${response.status}: ${errorText}`);
        }

        const result = await response.json();
        console.log('‚úÖ V√≠deo salvo:', result);

        showAlert('‚úÖ V√≠deo salvo com sucesso!', 'success');
        document.getElementById('video-modal').style.display = 'none';

        await loadVideos();

    } catch (error) {
        console.error('‚ùå Erro ao salvar v√≠deo:', error);
        showAlert('‚ùå Erro ao salvar v√≠deo: ' + error.message, 'error');
    } finally {
        showGlobalLoading(false);
    }
}

async function deleteVideo(videoId) {
    const video = videos.find(v => v.id == videoId);
    if (!video) return;

    showConfirmation(`Tem certeza que deseja excluir o v√≠deo "${video.titulo}"?`, async () => {
        try {
            showGlobalLoading(true);

            const response = await fetch(`${API_BASE_URL}/api/videos/${videoId}`, {
                method: 'DELETE'
            });

            if (!response.ok) throw new Error(`Erro ${response.status}`);

            const result = await response.json();
            console.log('‚úÖ V√≠deo exclu√≠do:', result);

            showAlert('‚úÖ V√≠deo exclu√≠do com sucesso!', 'success');

            await loadVideos();

        } catch (error) {
            console.error('‚ùå Erro ao excluir v√≠deo:', error);
            showAlert('‚ùå Erro ao excluir v√≠deo: ' + error.message, 'error');
        } finally {
            showGlobalLoading(false);
        }
    });
}

// Curso Management
function showCursoModal(curso = null) {
    const modal = document.getElementById('curso-modal');
    const title = document.getElementById('curso-modal-title');
    
    // Resetar contadores e interface
    moduloCount = 0;
    aulaCount = 0;
    document.getElementById('modulos-container').innerHTML = '';

    if (curso) {
        title.textContent = 'Editar Curso';
        document.getElementById('curso-id').value = curso.id;
        document.getElementById('curso-titulo').value = curso.titulo;
        document.getElementById('curso-descricao').value = curso.descricao || '';
        document.getElementById('curso-materia').value = curso.materia;
        document.getElementById('curso-categoria').value = curso.categoria;
        document.getElementById('curso-nivel').value = curso.nivel;
        document.getElementById('curso-duracao').value = curso.duracao;
        document.getElementById('curso-imagem').value = curso.imagem || '';
        document.getElementById('curso-ativo').value = curso.ativo ? 'true' : 'false';

        // Carregar m√≥dulos se existirem
        if (curso.modulos && curso.modulos.length > 0) {
            curso.modulos.forEach(modulo => {
                addModuloToForm(modulo);
            });
        } else {
            addModuloToForm();
        }
    } else {
        title.textContent = 'Criar Curso';
        document.getElementById('curso-form').reset();
        document.getElementById('curso-ativo').value = 'true';
        addModuloToForm();
    }

    modal.style.display = 'flex';
}

function editCurso(cursoId) {
    const curso = cursos.find(c => c.id == cursoId);
    if (curso) {
        showCursoModal(curso);
    }
}

// ‚úÖ ADICIONAR M√ìDULO AO FORMUL√ÅRIO
function addModuloToForm(moduloData = null) {
    moduloCount++;
    const moduloId = `modulo_${moduloCount}`;
    
    const moduloHTML = `
        <div class="modulo-item" data-modulo-id="${moduloId}" style="background: rgba(255,207,0,0.05); padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #555;">
            <div class="modulo-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <div style="flex: 1;">
                    <input type="text" class="form-control modulo-titulo" placeholder="T√≠tulo do M√≥dulo" 
                           value="${moduloData?.titulo || ''}" required>
                </div>
                <button type="button" class="btn btn-danger btn-sm remove-modulo">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            
            <div class="aulas-container" style="margin-top: 15px;">
                ${moduloData?.aulas && moduloData.aulas.length > 0 ? 
                    moduloData.aulas.map(aula => `
                        <div class="aula-item" style="display: flex; gap: 10px; margin-bottom: 10px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 3px solid #ffcf00;">
                            <div style="flex: 1;">
                                <input type="text" class="form-control aula-titulo" placeholder="T√≠tulo da Aula" value="${aula.titulo}" required>
                                <input type="text" class="form-control aula-descricao" placeholder="Descri√ß√£o da aula" value="${aula.descricao || ''}" style="margin-top: 8px;">
                                <div style="display: flex; gap: 10px; margin-top: 8px;">
                                    <input type="number" class="form-control aula-duracao" placeholder="Dura√ß√£o (min)" value="${aula.duracao || 15}" min="1" style="flex: 1;">
                                    <input type="number" class="form-control aula-ordem" placeholder="Ordem" value="${aula.ordem || 1}" min="1" style="flex: 1;">
                                </div>
                                <input type="text" class="form-control aula-video-url" placeholder="URL do v√≠deo (opcional)" value="${aula.videoUrl || ''}" style="margin-top: 8px;">
                                <textarea class="form-control aula-conteudo" placeholder="Conte√∫do da aula..." rows="3" style="margin-top: 8px;">${aula.conteudo || ''}</textarea>
                            </div>
                            <button type="button" class="btn btn-danger btn-sm remove-aula">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `).join('') 
                    : 
                    '<div class="no-aulas" style="text-align: center; padding: 20px; color: #888;">Nenhuma aula adicionada</div>'
                }
            </div>
            
            <button type="button" class="btn btn-secondary btn-sm add-aula" style="margin-top: 10px;">
                <i class="fas fa-plus"></i> Adicionar Aula
            </button>
        </div>
    `;
    
    document.getElementById('modulos-container').insertAdjacentHTML('beforeend', moduloHTML);
    
    // Configurar event listeners
    const moduloElement = document.querySelector(`[data-modulo-id="${moduloId}"]`);
    
    moduloElement.querySelector('.remove-modulo').addEventListener('click', function() {
        if (document.querySelectorAll('.modulo-item').length > 1) {
            moduloElement.remove();
        } else {
            alert('‚ùå O curso deve ter pelo menos um m√≥dulo!');
        }
    });
    
    moduloElement.querySelector('.add-aula').addEventListener('click', function() {
        addAulaToModulo(moduloId);
    });
    
    // Configurar bot√µes de remover aula
    moduloElement.querySelectorAll('.remove-aula').forEach(btn => {
        btn.addEventListener('click', function() {
            const aulasContainer = this.closest('.aulas-container');
            if (aulasContainer.querySelectorAll('.aula-item').length > 1) {
                this.closest('.aula-item').remove();
            } else {
                alert('‚ùå Cada m√≥dulo deve ter pelo menos uma aula!');
            }
        });
    });
}

// ‚úÖ ADICIONAR AULA AO M√ìDULO
function addAulaToModulo(moduloId) {
    aulaCount++;
    
    const aulaHTML = `
        <div class="aula-item" style="display: flex; gap: 10px; margin-bottom: 10px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 3px solid #4361ee;">
            <div style="flex: 1;">
                <input type="text" class="form-control aula-titulo" placeholder="T√≠tulo da Aula" required>
                <input type="text" class="form-control aula-descricao" placeholder="Descri√ß√£o da aula" style="margin-top: 8px;">
                <div style="display: flex; gap: 10px; margin-top: 8px;">
                    <input type="number" class="form-control aula-duracao" placeholder="Dura√ß√£o (min)" value="15" min="1" style="flex: 1;">
                    <input type="number" class="form-control aula-ordem" placeholder="Ordem" value="1" min="1" style="flex: 1;">
                </div>
                <input type="text" class="form-control aula-video-url" placeholder="URL do v√≠deo (opcional)" style="margin-top: 8px;">
                <textarea class="form-control aula-conteudo" placeholder="Conte√∫do da aula..." rows="3" style="margin-top: 8px;"></textarea>
            </div>
            <button type="button" class="btn btn-danger btn-sm remove-aula">
                <i class="fas fa-times"></i>
            </button>
        </div>
    `;
    
    const moduloElement = document.querySelector(`[data-modulo-id="${moduloId}"] .aulas-container`);
    
    // Remove mensagem "nenhuma aula" se existir
    const noAulas = moduloElement.querySelector('.no-aulas');
    if (noAulas) {
        noAulas.remove();
    }
    
    moduloElement.insertAdjacentHTML('beforeend', aulaHTML);
    
    // Configurar event listener para o novo bot√£o de remover
    const newAula = moduloElement.lastElementChild;
    newAula.querySelector('.remove-aula').addEventListener('click', function() {
        const aulasContainer = this.closest('.aulas-container');
        if (aulasContainer.querySelectorAll('.aula-item').length > 1) {
            this.closest('.aula-item').remove();
        } else {
            alert('‚ùå Cada m√≥dulo deve ter pelo menos uma aula!');
        }
    });
}

// ‚úÖ SALVAR CURSO
async function saveCurso() {
    const cursoId = document.getElementById('curso-id').value;
    
    // Coletar dados b√°sicos do curso
    const cursoData = {
        titulo: document.getElementById('curso-titulo').value,
        descricao: document.getElementById('curso-descricao').value,
        materia: document.getElementById('curso-materia').value,
        categoria: document.getElementById('curso-categoria').value,
        nivel: document.getElementById('curso-nivel').value,
        duracao: parseInt(document.getElementById('curso-duracao').value),
        imagem: document.getElementById('curso-imagem').value || null,
        ativo: document.getElementById('curso-ativo').value === 'true'
    };

    // Coletar m√≥dulos e aulas
    const modulos = [];
    document.querySelectorAll('.modulo-item').forEach((moduloElement, index) => {
        const modulo = {
            titulo: moduloElement.querySelector('.modulo-titulo').value,
            ordem: index + 1,
            aulas: []
        };

        // Coletar aulas do m√≥dulo
        moduloElement.querySelectorAll('.aula-item').forEach((aulaElement, aulaIndex) => {
            const aula = {
                titulo: aulaElement.querySelector('.aula-titulo').value,
                descricao: aulaElement.querySelector('.aula-descricao').value,
                duracao: parseInt(aulaElement.querySelector('.aula-duracao').value) || 15,
                ordem: parseInt(aulaElement.querySelector('.aula-ordem').value) || (aulaIndex + 1),
                videoUrl: aulaElement.querySelector('.aula-video-url').value || null,
                conteudo: aulaElement.querySelector('.aula-conteudo').value || ''
            };
            modulo.aulas.push(aula);
        });

        modulos.push(modulo);
    });

    cursoData.modulos = modulos;

    try {
        showGlobalLoading(true);

        let response;
        if (cursoId) {
            response = await fetch(`${API_BASE_URL}/api/cursos/${cursoId}`, {
                method: 'PUT',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(cursoData)
            });
        } else {
            response = await fetch(`${API_BASE_URL}/api/cursos`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(cursoData)
            });
        }

        if (response.ok) {
            const result = await response.json();
            showAlert('‚úÖ Curso salvo com sucesso!', 'success');
            document.getElementById('curso-modal').style.display = 'none';
            await loadCursos();
        } else {
            const errorText = await response.text();
            throw new Error(`Erro ${response.status}: ${errorText}`);
        }

    } catch (error) {
        console.error('‚ùå Erro ao salvar curso:', error);
        showAlert('‚ùå Erro ao salvar curso: ' + error.message, 'error');
    } finally {
        showGlobalLoading(false);
    }
}

// ‚úÖ CRIAR CURSO DE EXEMPLO
async function criarCursoExemplo() {
    const cursoExemplo = {
        titulo: "Matem√°tica B√°sica - Exemplo",
        descricao: "Curso completo de matem√°tica b√°sica para iniciantes com exemplos pr√°ticos",
        materia: "matematica",
        categoria: "algebra",
        nivel: "fundamental",
        duracao: 8,
        imagem: "https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=400&h=200&fit=crop",
        ativo: true,
        modulos: [
            {
                titulo: "Introdu√ß√£o √† Matem√°tica",
                ordem: 1,
                aulas: [
                    {
                        titulo: "O que √© Matem√°tica?",
                        descricao: "Entenda os conceitos b√°sicos da matem√°tica e sua import√¢ncia no dia a dia",
                        duracao: 15,
                        ordem: 1,
                        videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                        conteudo: "<h2>Introdu√ß√£o √† Matem√°tica</h2><p>A matem√°tica √© fundamental para o desenvolvimento do racioc√≠nio l√≥gico.</p>"
                    }
                ]
            }
        ]
    };

    try {
        showGlobalLoading(true);
        
        const response = await fetch(`${API_BASE_URL}/api/cursos`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(cursoExemplo)
        });

        if (response.ok) {
            const result = await response.json();
            showAlert('‚úÖ Curso exemplo criado com sucesso!', 'success');
            await loadCursos();
        } else {
            throw new Error('Erro ao criar curso exemplo');
        }
    } catch (error) {
        console.error('Erro ao criar curso exemplo:', error);
        showAlert('‚ùå Erro ao criar curso exemplo: ' + error.message, 'error');
    } finally {
        showGlobalLoading(false);
    }
}

// ‚úÖ FUN√á√ÉO DELETE CURSO CORRIGIDA
async function deleteCurso(cursoId) {
    const curso = cursos.find(c => c.id == cursoId);
    if (!curso) {
        showAlert('‚ùå Curso n√£o encontrado!', 'error');
        return;
    }

    showConfirmation(`Tem certeza que deseja excluir o curso "${curso.titulo}"?`, async () => {
        try {
            showGlobalLoading(true);

            console.log(`üóëÔ∏è Tentando excluir curso ID: ${cursoId}`);
            
            const response = await fetch(`${API_BASE_URL}/api/cursos/${cursoId}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            console.log('üì° Status da resposta:', response.status);

            if (response.ok) {
                const result = await response.json();
                console.log('‚úÖ Curso exclu√≠do:', result);
                showAlert('‚úÖ Curso exclu√≠do com sucesso!', 'success');
                
                // Remove da lista local
                cursos = cursos.filter(c => c.id != cursoId);
                displayCursos(cursos);
                
            } else {
                // Se der 404, significa que a rota n√£o existe no backend
                if (response.status === 404) {
                    showAlert('‚ùå Rota DELETE n√£o dispon√≠vel no servidor. Atualize o backend.', 'error');
                } else {
                    const errorText = await response.text();
                    showAlert(`‚ùå Erro ${response.status}: ${errorText}`, 'error');
                }
            }

        } catch (error) {
            console.error('‚ùå Erro ao excluir curso:', error);
            showAlert('‚ùå Erro de conex√£o: ' + error.message, 'error');
        } finally {
            showGlobalLoading(false);
        }
    });
}

// System Functions
function saveSettings() {
    showAlert('Configura√ß√µes salvas com sucesso!', 'success');
}

async function resetAllPoints() {
    try {
        showGlobalLoading(true);

        for (const user of users) {
            await fetch(`${API_BASE_URL}/api/usuarios/${user.id}`, {
                method: 'PUT',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    pontuacao: 0,
                    desafiosCompletados: 0
                })
            });
        }

        showAlert('Pontua√ß√µes zeradas com sucesso!', 'success');
        loadDashboardData();

    } catch (error) {
        showAlert('Erro ao zerar pontua√ß√µes: ' + error.message, 'error');
    } finally {
        showGlobalLoading(false);
    }
}

async function resetAllData() {
    try {
        showGlobalLoading(true);

        // Resetar todos os usu√°rios
        for (const user of users) {
            await fetch(`${API_BASE_URL}/api/usuarios/${user.id}`, {
                method: 'PUT',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    pontuacao: 0,
                    desafiosCompletados: 0
                })
            });
        }

        showAlert('Todos os dados foram resetados!', 'success');
        loadDashboardData();

    } catch (error) {
        showAlert('Erro ao resetar dados: ' + error.message, 'error');
    } finally {
        showGlobalLoading(false);
    }
}

// UI Helper Functions
function showAlert(message, type = 'success') {
    if (!alertContainer) return;

    const alert = document.createElement('div');
    alert.className = `alert alert-${type}`;
    alert.innerHTML = `
        <span>${message}</span>
        <button class="alert-close">&times;</button>
    `;

    alertContainer.appendChild(alert);

    setTimeout(() => {
        alert.remove();
    }, 5000);

    alert.querySelector('.alert-close').addEventListener('click', function() {
        alert.remove();
    });
}

function showConfirmation(message, action) {
    const confirmMessage = document.getElementById('confirm-message');
    if (confirmMessage) {
        confirmMessage.textContent = message;
    }
    pendingAction = action;
    document.getElementById('confirm-modal').style.display = 'flex';
}

function showGlobalLoading(show) {
    const loading = document.getElementById('loadingGlobal');
    if (loading) {
        loading.style.display = show ? 'flex' : 'none';
    }
}

// Fun√ß√£o para testar a rota DELETE - execute no console do navegador
window.testDeleteAPI = async function() {
    try {
        console.log('üß™ TESTE DA ROTA DELETE');
        
        // Testa em um curso que existe
        const cursoId = 1;
        console.log(`üîç Testando DELETE no curso ID: ${cursoId}`);
        
        const response = await fetch(`https://coliseum-api.onrender.com/api/cursos/${cursoId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        
        console.log('üì° Status:', response.status);
        console.log('üì° Headers:', Object.fromEntries(response.headers.entries()));
        
        if (response.ok) {
            const result = await response.json();
            console.log('‚úÖ DELETE FUNCIONOU:', result);
            return true;
        } else {
            const errorText = await response.text();
            console.log('‚ùå DELETE FALHOU:', errorText);
            return false;
        }
        
    } catch (error) {
        console.error('‚ùå ERRO NO TESTE:', error);
        return false;
    }
};
    </script>
</body>
</html>
